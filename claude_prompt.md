
> 角色设定：  
> 你是一名资深的 **产品架构师 + 技术架构师**，善于从现有代码与需求文档中梳理业务背景、功能架构与演进规划，并形成可用于汇报和对接设计/开发的结构化文档。

> 项目背景：  
>
> * 当前项目根目录是：一个为 **跨境电商独立站 E-bike 品牌** 打造的 **AI 客服系统**。  
> * 项目中包含一个 **自研坐席工作台（客服工作台）**，但目前自研工作台更多是 **备选 / 未来规划方向**。  
> * 当前的 **核心功能** 是：  
>   1. 在「鉴权」相关目录下的 **AI 客服服务**，面向独立站用户提供智能对话服务；  
>   2. 当触发 **人工监管 / 升级** 时，将对话 **转接到坐席工作台**（或未来接入的第三方客服系统）的能力。  
> * 未来规划包括但不限于：  
>   * 与 **Shopify 集成**（如接入 Shopify 独立站、订单/客户数据、插件生态等）；  
>   * 与 **外部客服工作台 / 工单系统** 集成（例如：外部 SaaS 客服、第三方工单产品等）；  
>   * 自研客服工作台作为可选方案，与外部系统形成 **可插拔 / 可替换架构**。

> 可用资源说明：  
>
> * 请遍历当前项目文件夹下的 **所有代码、配置、目录结构**。  
> * **重点关注**：  
>   * `鉴权` 相关目录（其中包含 AI 客服核心服务以及与鉴权/路由/权限等相关的模块）；  
>   * `docs` 目录下的需求文档（特别是：位于「鉴权」目录下的 `docs` 文件夹中的需求文档），这些是需求与规划的重要参考。  
> * 在梳理功能时，如果代码中已经有实现/接口/路由/配置，请优先认为是「已实现」或「进行中」；如果只在文档中体现但没有看到实现，请归类为「计划中」或「备选」。

> 任务目标：  
> 请在充分阅读代码与 `docs` 需求文档后，为本项目编写一份 **《项目功能架构文档》**，要求结构清晰、层级分明，能用于：  
>
> * 给领导/产品/技术团队做汇报；  
> * 给后续画 **架构图、技术图** 提供基础素材。

> 文档结构与具体要求（请严格按照下列结构输出）：  
>
> 1. **一、项目概述**  
>    * 1.1 项目背景（跨境电商独立站 E-bike 品牌的基本情况，可结合代码/文档中涉及到的站点、国家、多语言、多币种等信息）  
>    * 1.2 项目目标（提升客服效率、降低人工成本、提升用户满意度、支持多站点/多渠道等）  
>    * 1.3 主要使用角色（如：终端用户/访客、AI 客服、人工坐席、运营人员、管理员等）  
>
> 2. **二、整体功能架构概览**  
>    * 2.1 用文字描述一个「整体功能架构图」，包含的关键模块/系统节点，例如：  
>      * 独立站前端（Web / H5 / 小程序，如有）  
>      * AI 客服对话中台 / 服务  
>      * 鉴权与用户识别模块  
>      * 会话管理与上下文管理  
>      * 意图识别与知识库（FAQ、商品知识、售后策略等）  
>      * 人工坐席工作台（自研工作台，标注为「备选/规划」）  
>      * 第三方客服工作台 / 工单系统（标注为「未来集成」）  
>      * Shopify / 其他电商平台（标注为「未来集成」）  
>      * 运营配置后台（如标签、话术、分流策略、ACL 等）  
>      * 日志与监控、数据分析与报表等  
>    * 2.2 对这些模块之间的 **主要交互关系** 用文字描述（例如“独立站前端 → 鉴权服务 → AI 客服 → 需要人工时 → 转人工到工作台 / 第三方客服系统”）。  
>    * 2.3 指出：  
>      * **AI 客服** 是当前的 **核心功能模块**；  
>      * **自研坐席工作台** 是 **备选 / 未来重点发展模块**，并且未来可能与外部客服系统并存或互相替换。  
>
> 3. **三、核心业务流程说明**  
>    * 3.1 典型用户会话流程（从用户访问独立站开始，到 AI 客服接入、会话处理、结束为止）  
>    * 3.2 人工监管/升级流程（包括触发条件、策略、转人工过程、坐席处理、结束与回写）  
>    * 3.3 多渠道/多站点支持（如有：不同国家站点、不同语言、不同域名）  
>    * 3.4 与订单/物流/售后场景相关的典型流程（如果在代码和 docs 中有体现，请提炼出来）  
>
> 4. **四、功能模块明细**  
>    请以 **模块列表 + 分级结构** 的形式，详细列出本项目中的功能模块。  
>    * 对每个模块，使用类似格式：  
>      * 模块名称：xxx  
>      * 所属层级：如「前端层 / 应用层 / 服务层 / 集成层 / 基础设施层」  
>      * 职责说明：该模块负责做什么  
>      * 关键子功能：列表形式  
>      * 相关代码位置（目录/主要文件名）  
>      * 外部依赖（例如依赖某第三方 API、SDK 或服务）  
>      * 状态标记：**从以下标签中选一个或多个**  
>        * `[已实现]`：代码中已有明确实现且可用  
>        * `[进行中]`：代码中有明显开发中的部分或已部分实现  
>        * `[计划中]`：需求文档中有描述，但尚未看到明显实现  
>        * `[备选]`：作为可选方案存在，未来可能用也可能不用  
>    * 特别强调：  
>      * AI 客服相关模块应细化（意图识别、对话管理、知识库/FAQ、LLM 调用、冷启动/兜底策略等）。  
>      * 自研坐席工作台模块请单独列出，并用 `[备选]` / `[计划中]` 等进行标注。  
>      * Shopify 与第三方客服系统的集成点也要以模块形式描述，哪怕尚未实现，也要规划出来并清晰标注状态。  
>
> 5. **五、系统集成与外部依赖**  
>    * 5.1 与独立站的集成方式（前端嵌入脚本、API 网关、Webhook 等）  
>    * 5.2 未来与 Shopify 集成的设想与接口位置（作为「规划设计」，标注状态）  
>    * 5.3 未来与第三方客服工作台/工单系统集成的方式（如：Webhook、REST API、队列等），以及可能的路由策略（何时走自研工作台，何时走外部工作台）。  
>    * 5.4 认证、鉴权和多租户/多站点隔离方案，如在代码中有体现请总结。  
>
> 6. **六、数据与监控**  
>    * 6.1 核心数据实体（用户、会话、消息、工单、订单、商品、知识库条目等）及其之间的关系（可以文字描述 ER 图关系）。  
>    * 6.2 日志与监控指标（如有）：QPS、响应时间、对话成功率、转人工率、工单解决率等。  
>    * 6.3 数据分析与报表能力（当前有/未来规划的都写入，并标注状态）。  
>
> 7. **七、版本现状与未来规划（Roadmap 视角）**  
>    * 7.1 当前版本已实现的能力列表（用 `[已实现]` 标注）  
>    * 7.2 短期优先迭代项（进行中/高优先级计划，用 `[进行中]` 或 `[计划中-短期]` 标注）  
>    * 7.3 中长期规划（包括：自研坐席工作台完善、Shopify 集成、对接第三方客服系统、更多渠道接入等，用 `[计划中-中长期]` 标注）  
>    * 7.4 备选方案（如在 docs 中存在不同技术/产品选型路径，请以 `[备选]` 列出，对比利弊）。  
>
> 输出风格要求：  
> * 使用 **分级标题 + 列表**，结构清晰，便于后续复制到文档或 Confluence 中。  
> * 尽可能 **引用实际代码目录名/文件名**，但不要贴长代码。  
> * 如果某些功能/模块在代码中信息不足，请在对应位置清楚写明：“基于 docs 推测，尚未在代码中找到实现，状态为 `[计划中]` / `[备选]`”。  
> * 务必突出说明：**AI 客服是当前系统的核心功能，自研客服工作台是未来备选与拓展方向**。

