# L4-3: 情绪识别与视频协助

> **文档编号**: L4-3
> **文档版本**: v1.0
> **优先级**: P1（跨境增强层 - 重要）
> **状态**: ❌ 待开发
> **创建时间**: 2025-01-27

---

## 📑 文档导航

- **上级文档**: [ENTERPRISE_EBIKE_SUPPORT_TASKS.md](./ENTERPRISE_EBIKE_SUPPORT_TASKS.md)
- **同级文档**:
  - 上一篇: L4-2-Part2 智能推荐与主动服务
  - 当前: L4-3 情绪识别与视频协助
- **依赖关系**: 依赖 L1-1 会话管理、L2-2 客户画像（VIP识别）

---

## 🎯 功能概述

### 涵盖模块

本文档包含情绪识别与视频协助的全部功能模块（不拆分）：

| 模块编号 | 模块名称 | 核心功能 |
|---------|---------|---------|
| **模块1** | 客户情绪实时分析 | 文本情绪识别、情绪趋势跟踪、预警 |
| **模块2** | 智能升级与预警机制 | 自动升级资深坐席/主管、投诉预警 |
| **模块3** | 视频通话与远程协助 | 1对1视频通话、屏幕共享、远程指导 |
| **模块4** | AR辅助与互动工具 | AR安装指导、3D产品展示、互动白板 |

### 业务价值

**当前痛点**：
- ❌ 无法识别客户情绪，愤怒客户未及时安抚导致投诉升级
- ❌ 初级坐席处理复杂问题，客户体验差
- ❌ 技术问题难以远程解决（文字/图片沟通低效）
- ❌ 客户不会安装配件，退货率高

**实现后收益**：
- 📈 客户满意度提升 **50%**（及时识别和安抚负面情绪）
- 📈 投诉率降低 **60%**（智能升级机制）
- 📈 一次解决率提升 **40%**（视频远程协助）
- 📈 退货率降低 **35%**（AR安装指导）
- 💰 客服成本降低 **30%**（减少投诉处理、返修成本）

**Fiido 跨境电商场景**：
> **情绪识别场景**：
> - 客户："This is the 3rd time I'm contacting you! Still no response on my delivery!"
> - 系统分析情绪：**愤怒（98%）** + 关键词：3rd time, no response
> - 坐席看到红色预警：🔴 客户情绪：愤怒 | 风险：高投诉风险
> - 系统建议：
>   1. 立即道歉："I sincerely apologize for the frustration..."
>   2. 主管介入："Let me escalate this to my supervisor..."
>   3. 提供补偿："We'll offer you express shipping..."
> - **结果**：客户情绪缓解，未投诉，满意度从 1星 → 4星

> **视频协助场景**：
> - 客户："I can't install the battery, it won't fit."
> - 坐席文字指导3次，客户仍不会
> - 坐席发起视频通话邀请
> - 通过视频看到问题：客户装反了电池方向
> - 坐席实时指导："Turn it 180 degrees, align the red dots."
> - 客户成功安装，问题解决
> - **结果**：避免退货，节省物流成本 $50，客户留下5星好评

> **AR辅助场景**：
> - 客户购买 D11 + 儿童座椅配件
> - 不确定安装位置
> - 坐席发送 AR 安装指导链接
> - 客户打开手机摄像头，AR 实时显示：
>   - 3D 模型：儿童座椅应安装在后座架
>   - 动画演示：螺丝安装步骤
>   - 语音提示："First, align the bracket with the holes..."
> - 客户跟随AR指导，10分钟完成安装
> - **结果**：自助解决问题，无需人工干预，客户满意度 5星

---

## 📋 模块1: 客户情绪实时分析

### 1.1 功能概述

通过 NLP 分析客户消息文本，实时识别情绪（积极/中性/消极），预警高风险客户。

### 1.2 功能需求

#### F1-1: 文本情绪识别

**情绪分类**：

| 情绪类型 | 关键词示例 | 风险等级 | 处理策略 |
|---------|----------|---------|---------|
| **😊 积极** | happy, great, love, satisfied | 低 | 邀请好评、推荐产品 |
| **😐 中性** | okay, fine, normal | 低 | 正常服务 |
| **😟 焦虑** | worried, concerned, not sure | 中 | 主动安抚、提供详细解答 |
| **😠 愤怒** | angry, frustrated, terrible | 高 | 立即道歉、升级主管 |
| **😡 极度不满** | worst, never again, refund | 极高 | 紧急升级、提供补偿 |

**识别逻辑**：
```
业务逻辑：
1. 接收客户消息文本
2. 调用情绪分析 API（Azure Text Analytics / Google NLP）
3. 返回情绪得分：
   - 积极程度：0-100
   - 消极程度：0-100
   - 置信度：0-100
4. 判断情绪类型：
   IF 消极程度 > 80 AND 置信度 > 70: 愤怒
   ELSE IF 消极程度 > 60: 焦虑
   ELSE IF 积极程度 > 70: 积极
   ELSE: 中性
5. 实时显示在坐席端
```

**坐席端情绪显示UI**：
```
┌─────────────────────────────────────┐
│ 客户: Sarah Miller                   │
│ 🔴 情绪: 愤怒 (置信度 92%)           │
├─────────────────────────────────────┤
│ 对话记录                             │
│                                      │
│ 👤 客户 (10:30) 😠                  │
│ "This is ridiculous! I've been      │
│  waiting for 3 weeks and still no   │
│  update on my delivery!"             │
│                                      │
│ 💡 系统建议:                         │
│ ⚠️ 高投诉风险 - 立即处理             │
│ 1. 真诚道歉（使用话术模板1）         │
│ 2. 查询订单物流信息                  │
│ 3. 考虑升级至主管处理                │
│ 4. 提供补偿方案（优惠券/退款）       │
│                                      │
│ [查看话术] [升级主管] [查询订单]     │
└─────────────────────────────────────┘
```

#### F1-2: 情绪趋势跟踪

**趋势分析**：
- 记录每条消息的情绪得分
- 绘制情绪趋势曲线
- 检测情绪恶化（连续3条消极消息）

**趋势图示例**：
```
┌─────────────────────────────────────┐
│ 📊 客户情绪趋势                      │
├─────────────────────────────────────┤
│                                      │
│  积极 +100 ┤                         │
│            │                         │
│  中性   0  ┼─────────○────           │
│            │         ╱ ╲             │
│  消极 -100 ┤        ╱   ●●●  ← 恶化  │
│            └────────────────→ 时间   │
│            10:25  10:30  10:35       │
│                                      │
│ ⚠️ 警告: 情绪持续恶化（3次）         │
│ 建议: 立即升级至资深坐席             │
│                                      │
│ [升级处理] [查看完整历史]            │
└─────────────────────────────────────┘
```

#### F1-3: 关键词预警

**高风险关键词库**：

| 类别 | 关键词 | 触发动作 |
|-----|--------|---------|
| 投诉威胁 | complaint, lawyer, sue, consumer protection | 🔴 紧急预警 + 主管通知 |
| 社交曝光 | Twitter, Facebook, review, expose | 🟠 高优先级处理 |
| 退款要求 | refund, money back, cancel | 🟡 提供解决方案 |
| 重复联系 | 3rd time, again, still no response | 🟡 道歉 + 升级 |

**预警机制**：
```
业务逻辑：
IF 检测到高风险关键词:
  1. 坐席端红色闪烁提醒
  2. 发送桌面通知："🔴 投诉风险预警"
  3. 自动通知主管（Slack/邮件）
  4. 记录预警事件到日志
  5. 提供应对话术模板
```

### 1.3 情绪识别技术方案

**方案选择**：
- **推荐**：Azure Text Analytics（支持多语言、准确率高）
- **备选**：Google Cloud NLP（成本较低）
- **开源方案**：基于 Hugging Face transformers（离线部署）

**性能要求**：
- 情绪识别延迟：< 500ms
- 识别准确率：> 85%
- 支持语言：英语、德语、法语、西班牙语

---

## 📋 模块2: 智能升级与预警机制

### 2.1 功能概述

基于情绪分析、关键词、客户价值，自动判断是否需要升级至资深坐席或主管。

### 2.2 功能需求

#### F2-1: 自动升级规则

**升级触发条件**：

| 条件 | 升级对象 | 优先级 |
|-----|---------|--------|
| 情绪：愤怒 + VIP客户 | 主管 | P0（立即） |
| 连续3次消极情绪 | 资深坐席 | P1（5分钟内） |
| 检测到投诉关键词 | 主管 | P0（立即） |
| 技术问题未解决 > 10分钟 | 技术支持 | P1（5分钟内） |
| 客户要求升级 | 主管 | P0（立即） |

**升级流程**：
```
业务逻辑：
1. 系统检测到升级条件
2. 提示当前坐席："建议升级至资深坐席"
3. 当前坐席点击"升级"按钮
4. 系统查询在线资深坐席/主管
5. 发送升级请求（含客户信息、对话历史）
6. 资深坐席接受 → 转接会话
7. 通知客户："I'm connecting you with my supervisor..."
8. 完成转接，记录升级原因
```

**坐席端升级提示UI**：
```
┌─────────────────────────────────────┐
│ 🚨 升级建议                          │
├─────────────────────────────────────┤
│                                      │
│ 检测到以下风险因素:                  │
│ ✅ 客户情绪: 愤怒 (92%)              │
│ ✅ 关键词: "3rd time" "no response" │
│ ✅ 客户类型: VIP (LTV $2,500)       │
│                                      │
│ 建议操作:                            │
│ 🔴 立即升级至主管处理                │
│                                      │
│ 可用主管 (2人在线):                  │
│ • Mike Johnson (客服主管)            │
│   当前会话: 1 | 评分: 4.8/5.0       │
│   [转接]                             │
│                                      │
│ • Emily Davis (客服主管)             │
│   当前会话: 0 | 评分: 4.9/5.0       │
│   [转接] ⭐ 推荐                     │
│                                      │
│ [取消] [继续自己处理]                │
└─────────────────────────────────────┘
```

#### F2-2: 主管实时监控面板

**主管监控视图**：
```
┌─────────────────────────────────────┐
│ 👨‍💼 主管监控面板                    │
├─────────────────────────────────────┤
│                                      │
│ 🔴 实时预警 (3)                      │
│                                      │
│ • Sarah Miller - 坐席: Alice         │
│   情绪: 愤怒 | VIP客户 | 3次联系     │
│   风险: 🔴 极高（投诉威胁）          │
│   [接管会话] [查看详情]              │
│                                      │
│ • John Doe - 坐席: Bob               │
│   情绪: 焦虑 | 技术问题未解决        │
│   风险: 🟡 中等                      │
│   [接管会话] [查看详情]              │
│                                      │
│ 🟢 正常会话 (12)                     │
│                                      │
│ 📊 今日统计                          │
│ • 升级次数: 8                        │
│ • 投诉预警: 3 (已处理 2)             │
│ • 平均升级时长: 3.2分钟              │
│                                      │
│ [导出报表] [设置预警规则]            │
└─────────────────────────────────────┘
```

#### F2-3: 投诉预警与记录

**投诉风险评分**：
```
业务逻辑：
计算投诉风险得分（0-100）：
  风险得分 =
    情绪消极程度 × 0.4 +
    关键词严重度 × 0.3 +
    客户重要性 × 0.2 +
    历史投诉次数 × 0.1

IF 风险得分 > 80: 🔴 极高风险
ELSE IF 风险得分 > 60: 🟠 高风险
ELSE IF 风险得分 > 40: 🟡 中等风险
ELSE: 🟢 低风险
```

**投诉记录系统**：
- 自动创建投诉工单
- 记录投诉原因、处理过程、结果
- 定期复盘分析（每周投诉总结会）

---

## 📋 模块3: 视频通话与远程协助

### 3.1 功能概述

提供 1对1 视频通话、屏幕共享、远程指导功能，快速解决技术问题。

### 3.2 功能需求

#### F3-1: 视频通话功能

**通话发起流程**：
```
业务逻辑：
1. 坐席判断需要视频协助（如：安装问题）
2. 点击"发起视频通话"按钮
3. 系统生成唯一通话链接（WebRTC）
4. 坐席发送链接给客户：
   "I'd like to help you via video. Please click this link:
    https://fiido.com/video/abc123 (no app needed)"
5. 客户点击链接，浏览器打开视频通话
6. 双方视频连接，开始远程协助
7. 通话结束，系统自动保存录像（客户授权后）
```

**技术方案**：
- **推荐**：Twilio Video API（稳定、跨境网络好）
- **备选**：Agora.io（成本较低）
- **开源方案**：Jitsi Meet（自部署）

**视频通话UI**：
```
┌─────────────────────────────────────┐
│ 📹 视频通话 - Sarah Miller           │
├─────────────────────────────────────┤
│                                      │
│  ┌──────────────────────────────┐   │
│  │                              │   │
│  │    [客户视频画面]            │   │
│  │                              │   │
│  │                              │   │
│  └──────────────────────────────┘   │
│                                      │
│  ┌──────┐                            │
│  │坐席  │ 00:05:23                   │
│  └──────┘                            │
│                                      │
│  [🎤 静音] [📷 关闭摄像头]           │
│  [🖥️ 屏幕共享] [✏️ 白板]            │
│  [📸 截图] [⏸️ 录制]                │
│  [❌ 结束通话]                       │
│                                      │
│  💡 提示: 正在录制（已获客户同意）   │
└─────────────────────────────────────┘
```

#### F3-2: 屏幕共享功能

**应用场景**：
- 客户展示问题（如：APP错误、网站加载失败）
- 坐席演示操作（如：如何下单、如何使用APP）

**共享流程**：
```
业务逻辑：
1. 坐席/客户点击"屏幕共享"
2. 浏览器请求屏幕共享权限
3. 选择共享内容：
   - 整个屏幕
   - 特定应用窗口
   - 浏览器标签页
4. 开始共享，对方看到实时画面
5. 坐席可在共享画面上标注（画圈、箭头）
```

#### F3-3: 远程指导工具

**互动白板**：
- 坐席可在视频画面上绘制
- 标注重点位置（如：电池安装位置）
- 客户看到实时标注

**文件传输**：
- 坐席发送说明书 PDF
- 客户发送问题照片（清晰度更高）

**通话录制与回放**：
- 录制通话过程（需客户同意）
- 保存7天后自动删除（隐私保护）
- 用于培训新坐席（案例学习）

### 3.3 适用场景

**Fiido E-bike 典型场景**：

| 问题类型 | 传统方式（文字） | 视频协助 | 效率提升 |
|---------|----------------|---------|---------|
| 电池安装错误 | 来回沟通5次，30分钟 | 视频3分钟解决 | **10倍** |
| 刹车异响 | 描述不清，最终退货 | 视频看到松动螺丝，指导拧紧 | 避免退货 |
| APP无法配对 | 邮件截图3次，1天 | 屏幕共享5分钟解决 | **28倍** |

---

## 📋 模块4: AR辅助与互动工具

### 4.1 功能概述

利用 AR（增强现实）技术，提供沉浸式安装指导、3D产品展示。

### 4.2 功能需求

#### F4-1: AR安装指导

**应用场景**：
- 儿童座椅安装
- 货架安装
- 备用电池更换

**AR体验流程**：
```
业务逻辑：
1. 客户购买配件（如：儿童座椅）
2. 坐席发送 AR 安装指导链接
3. 客户打开链接（支持 iOS Safari / Android Chrome）
4. 授权摄像头权限
5. 将摄像头对准自行车
6. AR 系统识别自行车型号（图像识别）
7. 3D 虚拟儿童座椅叠加在实景上
8. 动画演示安装步骤：
   Step 1: 对齐支架孔位 ← 红色箭头指示
   Step 2: 插入螺丝 ← 动画演示方向
   Step 3: 拧紧螺母 ← 显示所需工具
9. 语音提示："Turn the wrench clockwise 3 times."
10. 客户完成安装，点击"完成"
11. 系统记录完成时间，发送满意度调查
```

**技术方案**：
- **iOS**: ARKit（Apple原生支持，无需App）
- **Android**: ARCore（Google原生支持）
- **Web AR**: 8th Wall / AR.js（跨平台）

#### F4-2: 3D产品展示

**应用场景**：
- 客户犹豫不决，想看实物
- 对比不同车型差异
- 查看配件兼容性

**3D展示功能**：
```
┌─────────────────────────────────────┐
│ 🎨 3D产品展示 - Fiido D11           │
├─────────────────────────────────────┤
│                                      │
│    [3D模型旋转视图]                  │
│        ↻ 360° 旋转                   │
│        🔍 放大缩小                   │
│        📐 尺寸标注                   │
│                                      │
│  操作:                               │
│  • 拖拽旋转查看                      │
│  • 点击零部件查看名称和参数          │
│  • 切换颜色（黑/白/灰/红）           │
│                                      │
│  配件兼容性测试:                     │
│  [+ 添加儿童座椅] ← 看是否合适       │
│  [+ 添加货架]                        │
│                                      │
│  [分享链接给客户] [下载模型]         │
└─────────────────────────────────────┘
```

**客户端体验**：
- 客户收到链接，手机浏览器打开
- 无需下载APP
- 可将3D模型"放置"在自家环境中（AR模式）
- 查看实际大小比例（1:1尺寸）

#### F4-3: 互动标注工具

**功能**：
- 坐席在产品图片/视频上绘制标注
- 发送给客户，实时同步
- 客户也可标注问题位置

**应用示例**：
```
场景：客户不知道如何打开电池仓

1. 坐席请求客户拍照上传
2. 客户发送照片
3. 坐席在照片上画圈 + 箭头：
   "按这里的红色按钮 ←"
4. 发送标注后的照片给客户
5. 客户看到清晰指示，成功打开
```

---

## 🔗 与其他模块的关系

**依赖关系**：
- **依赖**: L1-1 会话管理（消息流、会话状态）
- **依赖**: L2-2 客户画像（VIP识别、购买历史）
- **被依赖**: L3-1 数据分析（情绪统计、升级率分析）

**数据流**：
```
客户发送消息
  ↓
情绪分析（模块1）→ 检测愤怒情绪
  ↓
触发升级建议（模块2）
  ↓
坐席判断：复杂技术问题
  ↓
发起视频通话（模块3）
  ↓
视频中发现需要安装指导
  ↓
发送AR安装链接（模块4）
  ↓
客户成功安装，问题解决
  ↓
记录处理结果 → 更新客户画像
```

---

## 📊 开发优先级

### 第一阶段（P0 - 核心功能）
- [ ] 客户情绪实时分析（文本NLP）
- [ ] 关键词预警机制
- [ ] 视频通话基础功能

### 第二阶段（P1 - 增强功能）
- [ ] 智能升级规则引擎
- [ ] 主管监控面板
- [ ] 屏幕共享功能

### 第三阶段（P2 - 高级功能）
- [ ] AR安装指导（iOS/Android）
- [ ] 3D产品展示
- [ ] 互动标注工具

---

## 🧪 测试要点

### 功能测试
- 情绪识别准确率测试（100条真实对话）
- 升级规则验证（10个场景）
- 视频通话稳定性测试（10分钟连续通话）
- AR兼容性测试（iOS 15+, Android 10+）

### 性能测试
- 情绪分析延迟（< 500ms）
- 视频通话延迟（< 200ms）
- AR模型加载时间（< 3s）

### 边界测试
- 多语言情绪识别（英/德/法/西）
- 弱网环境视频通话（3G网络）
- 无AR设备降级方案（显示2D图片）

---

## 📝 实施注意事项

### 技术约束
1. **情绪分析实时性**：延迟 < 500ms，不影响会话流畅度
2. **视频通话隐私**：录制需客户明确授权，符合GDPR
3. **AR设备兼容性**：iOS 12+, Android 8+，不支持设备显示降级方案
4. **成本控制**：视频通话按分钟计费，优化通话时长（目标 < 10分钟/次）

### 成本估算
- 情绪分析API：Azure Text Analytics $1/千次调用
- 视频通话：Twilio Video $0.004/分钟/参与者
- AR服务：8th Wall $99/月（无限次使用）
- 预估月成本：$500（基于1000次情绪分析 + 200次视频通话）

### Fiido 业务特点
- 技术产品，安装问题多，视频/AR协助价值高
- 跨境客户，时差大，优先使用异步AR（无需实时坐席）
- 客户年轻化（25-40岁），AR接受度高
- 德国/美国客户重视隐私，视频录制需明确告知

---

## 🎯 关键成功指标（KPI）

| 指标 | 当前基准 | 目标值 | 测量方式 |
|-----|---------|--------|---------|
| 情绪识别准确率 | N/A | > 85% | 人工抽检100条 vs AI判断 |
| 投诉预警成功率 | N/A | > 70% | 预警后成功避免投诉 / 总预警次数 |
| 升级响应时长 | N/A | < 3分钟 | 触发升级 → 资深坐席接入时间 |
| 视频协助一次解决率 | N/A | > 80% | 视频后解决 / 总视频协助次数 |
| AR指导完成率 | N/A | > 60% | 客户成功完成AR安装 / 发送AR链接次数 |
| 客户满意度提升 | 3.8/5.0 | +50% → 5.7/5.0 | 使用情绪识别/视频的会话 vs 未使用 |

**数据收集周期**: 每周统计，每月复盘优化

---

**文档维护者**: Claude Code
**最后更新**: 2025-01-27
