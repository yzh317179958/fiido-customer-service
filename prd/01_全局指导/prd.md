# AI å®¢æœç³»ç»Ÿï¼ˆCoze æ¥å…¥ï¼‰+ AI ç›‘ç®¡ä¸äººå·¥æ¥ç®¡

## âš ï¸ å¼ºåˆ¶æ€§æŠ€æœ¯çº¦æŸ

**åœ¨é˜…è¯»æœ¬ PRD ä¹‹å‰ï¼Œè¯·åŠ¡å¿…å…ˆé˜…è¯»**ï¼š
ğŸ“˜ **[æŠ€æœ¯çº¦æŸä¸å¼€å‘åŸåˆ™æ–‡æ¡£](./TECHNICAL_CONSTRAINTS.md)**

è¯¥æ–‡æ¡£å®šä¹‰äº†ï¼š

- ğŸ”´ **Coze å¹³å°çš„ä¸å¯ç»•è¿‡é™åˆ¶**ï¼ˆSSEæµå¼å“åº”ã€JWTè®¤è¯ç­‰ï¼‰
- ğŸ”´ **æ ¸å¿ƒ API æ¥å£çš„ä¸å¯å˜çº¦æŸ**ï¼ˆ`/api/chat`, `/api/chat/stream` ç­‰ï¼‰
- âœ… **å…è®¸çš„åŠŸèƒ½æ‰©å±•æ–¹å‘**ï¼ˆä¼šè¯ç®¡ç†ã€ç›‘ç®¡å¼•æ“ç­‰ï¼‰
- ğŸ§ª **å¼ºåˆ¶æ€§æµ‹è¯•è¦æ±‚**

**æ‰€æœ‰åç»­åŠŸèƒ½å¼€å‘å¿…é¡»ä¸¥æ ¼éµå®ˆæŠ€æœ¯çº¦æŸæ–‡æ¡£ä¸­çš„è§„å®šï¼Œä¿è¯åŸæœ‰ AI å¯¹è¯åŠŸèƒ½ä¸å—ç ´å**ã€‚

### âš ï¸ Coze å¹³å°æ ¸å¿ƒçº¦æŸï¼ˆè´¯ç©¿å…¨æ–‡ï¼‰

æœ¬ PRD æ‰€æœ‰åŠŸèƒ½å¼€å‘å¿…é¡»éµå®ˆä»¥ä¸‹ **é“å¾‹**ï¼š

#### 1ï¸âƒ£ Coze API è°ƒç”¨è§„èŒƒï¼ˆä¸å¯ä¿®æ”¹ï¼‰

- âœ… **å¿…é¡»ä¿æŒ**ï¼šç°æœ‰ `/api/chat` å’Œ `/api/chat/stream` çš„ Coze API è°ƒç”¨é€»è¾‘
- âœ… **å¿…é¡»ä¿æŒ**ï¼šSSE æµå¼å“åº”æ ¼å¼å’Œè§£ææ–¹å¼
- âœ… **å¿…é¡»ä¿æŒ**ï¼šOAuth+JWT é‰´æƒæœºåˆ¶å’Œ `session_name` éš”ç¦»
- âŒ **ç¦æ­¢ä¿®æ”¹**ï¼šCoze API payload çš„å¿…éœ€å­—æ®µæ ¼å¼
- âŒ **ç¦æ­¢ä¿®æ”¹**ï¼šCoze API å“åº”çš„è§£æé€»è¾‘

#### 2ï¸âƒ£ åŠŸèƒ½æ‰©å±•åŸåˆ™

- âœ… **å…è®¸æ‰©å±•**ï¼šåœ¨ä¸ä¿®æ”¹æ ¸å¿ƒ API é€»è¾‘çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ ä¼šè¯çŠ¶æ€ç®¡ç†ã€ç›‘ç®¡å¼•æ“ç­‰åŠŸèƒ½
- âœ… **å…è®¸æ‰©å±•**ï¼šåœ¨ SSE æµä¸­æ·»åŠ æ–°çš„äº‹ä»¶ç±»å‹ï¼ˆå¦‚ `type:'manual_message'`ã€`type:'status'`ï¼‰
- âœ… **å…è®¸æ‰©å±•**ï¼šæ·»åŠ æ–°çš„ API æ¥å£ï¼ˆå¦‚äººå·¥æ¥ç®¡æ¥å£ï¼‰ï¼Œä½†ä¸å¾—å ç”¨æˆ–ä¿®æ”¹ç°æœ‰è·¯ç”±
- âŒ **ç¦æ­¢æ›¿æ¢**ï¼šä¸å¾—ç”¨ WebSocket æ›¿æ¢æ ¸å¿ƒ AI å¯¹è¯çš„ SSE æµå¼å“åº”

#### 3ï¸âƒ£ å‘åå…¼å®¹ä¿è¯

æ‰€æœ‰æ–°åŠŸèƒ½å¿…é¡»é€šè¿‡ä»¥ä¸‹æµ‹è¯•ï¼š

1. **æ ¸å¿ƒå¯¹è¯åŠŸèƒ½ä¸å—å½±å“**ï¼šç°æœ‰ AI å¯¹è¯æ¥å£åœ¨æ–°åŠŸèƒ½éƒ¨ç½²åä»æ­£å¸¸å·¥ä½œ
2. **ä¼šè¯éš”ç¦»æœºåˆ¶å®Œæ•´**ï¼š`session_name` éš”ç¦»é€»è¾‘ä¸å—ç ´å
3. **é”™è¯¯éš”ç¦»**ï¼šæ–°åŠŸèƒ½çš„å¼‚å¸¸ä¸åº”å¯¼è‡´æ ¸å¿ƒ AI å¯¹è¯åŠŸèƒ½å¤±è´¥

#### 4ï¸âƒ£ å¼€å‘å®¡æŸ¥è¦æ±‚

- ğŸ“‹ æ‰€æœ‰æ¶‰åŠ Coze API è°ƒç”¨çš„ä»£ç ä¿®æ”¹å¿…é¡»ä½¿ç”¨ `TECHNICAL_CONSTRAINTS.md` ä¸­çš„å®¡æŸ¥æ¸…å•
- ğŸ“‹ æ‰€æœ‰æ–°æ¥å£å¿…é¡»åœ¨ `api_contract.md` ä¸­å£°æ˜å¹¶æ ‡æ³¨æ˜¯å¦æ¶‰åŠ Coze API
- ğŸ“‹ å‚è€ƒ `coze.md` ç¬¬ 12 èŠ‚çš„å¼ºåˆ¶çº¦æŸè§„èŒƒ

---

## äº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰

### ç‰ˆæœ¬ä¿¡æ¯

- æ–‡æ¡£ç‰ˆæœ¬ï¼šv2.3.3
- æ›´æ–°æ—¶é—´ï¼š2025-11-24
- è´Ÿè´£äººï¼šç”¨æˆ· / Codex
- èƒŒæ™¯ï¼šå½“å‰ç³»ç»Ÿè¿è¡Œåœ¨ FastAPI (`backend.py`) + Vue3 (`frontend/` + `agent-workbench/`) æ¶æ„ï¼Œæ ¸å¿ƒæ¥å£ `/api/chat` ä¸ `/api/chat/stream` å·²ä¸Šçº¿ã€‚ç°éœ€åœ¨ä¸ç ´åæ—¢æœ‰èƒ½åŠ›çš„å‰æä¸‹ï¼Œå¼•å…¥ AI ç›‘ç®¡å’Œäººå·¥æ¥ç®¡èƒ½åŠ›ï¼Œå…ˆäº¤ä»˜ MVPï¼ˆP0ï¼‰ï¼Œå†é€æ­¥æ‰©å±•ï¼ˆP1/P2ï¼‰ã€‚æœ¬ç‰ˆ PRD å·²æ ¹æ® `prd/PRD_REVIEW.md` çš„è¯„å®¡ç»“æœè°ƒæ•´ï¼Œå¼ºè°ƒæ¸è¿›å¼å®ç°ã€SSE ä¼˜å…ˆå’Œæ¥å£ç²¾ç®€ã€‚

**âœ… P0 è¡¥å……é˜¶æ®µå®Œæˆ (2025-11-21)**
- P0-1: AI å¯¹è¯é˜»æ­¢é€»è¾‘ä¿®å¤ âœ…
- P0-2: åå¸­æ¥å…¥ API (é˜²æŠ¢å•) âœ…
- P0-3: ä¼šè¯åˆ—è¡¨æŸ¥è¯¢ API âœ…
- P1-1: ä¼šè¯ç»Ÿè®¡ API âœ…

**âœ… æ ¸å¿ƒåŠŸèƒ½å…¨é¢éªŒè¯ (2025-11-21)**
- Coze API æ ¸å¿ƒåŠŸèƒ½: 2/2 é€šè¿‡ âœ…
- ä¼šè¯éš”ç¦»æœºåˆ¶: 2/2 é€šè¿‡ âœ…
- äººå·¥æ¥ç®¡æµç¨‹: 7/7 é€šè¿‡ âœ…
- æŠ€æœ¯çº¦æŸéµå®ˆ: 4/4 é€šè¿‡ âœ…
- **æ€»ä½“é€šè¿‡ç‡**: 15/15 (100%)

**âœ… UI ç¾åŒ–ä¸å“ç‰Œå‡çº§ (2025-11-24)**
- åå¸­å·¥ä½œå° Fiido å“ç‰Œè®¾è®¡ âœ…
- ç”¨æˆ·ç«¯äººå·¥æ¥ç®¡ UI å®Œå–„ âœ…
- çŠ¶æ€æç¤ºå’Œäº¤äº’ä¼˜åŒ– âœ…
- å±€åŸŸç½‘è®¿é—®é…ç½® (192.168.1.133) âœ…

**ğŸ“š ç›¸å…³æ–‡æ¡£**:
- [P0-è¡¥å……å®Œæˆæ€»ç»“.md](../docs/P0-è¡¥å……å®Œæˆæ€»ç»“.md)
- [æ ¸å¿ƒåŠŸèƒ½å…¨é¢éªŒè¯æŠ¥å‘Š.md](../docs/æ ¸å¿ƒåŠŸèƒ½å…¨é¢éªŒè¯æŠ¥å‘Š.md)
- [å‰ç«¯åŠŸèƒ½éªŒè¯æŠ¥å‘Š.md](../docs/å‰ç«¯åŠŸèƒ½éªŒè¯æŠ¥å‘Š.md) â­ **æ–°å¢ (v2.3.3)**

**ğŸ¯ ç³»ç»ŸçŠ¶æ€**: **ç”Ÿäº§å¯ç”¨ (Production Ready)**

**âš ï¸ å·²çŸ¥ç¼ºå¤±åŠŸèƒ½**:
- âŒ ç”¨æˆ·ç«¯æ»¡æ„åº¦è¯„ä»·åŠŸèƒ½ï¼ˆå¾… v2.4 å®ç°ï¼‰

---

## ğŸ“‹ å¼€å‘æµç¨‹è§„èŒƒä¸è´¨é‡ä¿è¯ â­ **å¼ºåˆ¶éµå®ˆ**

### æ ¸å¿ƒå¼€å‘åŸåˆ™

æœ¬é¡¹ç›®é‡‡ç”¨**æ¸è¿›å¼ã€éç ´åæ€§æ‰©å±•**çš„å¼€å‘æ¨¡å¼ã€‚æ¯ä¸€æ­¥å¼€å‘éƒ½å¿…é¡»éµå¾ªä»¥ä¸‹æµç¨‹ï¼š

### ğŸ”´ é˜¶æ®µ1: å¼€å‘å‰å®¡æŸ¥ï¼ˆPre-Development Reviewï¼‰

**åœ¨å¼€å§‹ä»»ä½•æ–°åŠŸèƒ½å¼€å‘ä¹‹å‰ï¼Œå¿…é¡»å®Œæˆä»¥ä¸‹å®¡æŸ¥**ï¼š

#### 1.1 çº¦æŸæ–‡æ¡£å®¡æŸ¥æ¸…å•

- [ ] é˜…è¯» `prd/CONSTRAINTS_AND_PRINCIPLES.md` çš„æ‰€æœ‰çº¦æŸæ¡æ¬¾
- [ ] é˜…è¯» `prd/TECHNICAL_SOLUTION_v1.0.md` çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆ
- [ ] ç¡®è®¤æ–°åŠŸèƒ½æ˜¯å¦æ¶‰åŠ Coze API è°ƒç”¨ï¼ˆå¦‚æ¶‰åŠï¼Œå¿…é¡»éµå®ˆé“å¾‹1-3ï¼‰
- [ ] ç¡®è®¤æ–°åŠŸèƒ½æ˜¯å¦ä¼šä¿®æ”¹ç°æœ‰æ¥å£ï¼ˆå¦‚ä¼šä¿®æ”¹ï¼Œ**å¿…é¡»é‡æ–°è¯„ä¼°**ï¼‰
- [ ] æ£€æŸ¥æ˜¯å¦å¼•å…¥æ–°çš„å¤–éƒ¨ä¾èµ–ï¼ˆå¦‚ Redisã€WebSocket ç­‰ï¼‰

#### 1.2 ç°æœ‰åŠŸèƒ½åŸºçº¿éªŒè¯

**åœ¨å¼€å§‹å¼€å‘å‰ï¼Œè¿è¡ŒåŸºçº¿æµ‹è¯•ç¡®ä¿å½“å‰ç³»ç»Ÿæ­£å¸¸**ï¼š

```bash
# 1. éªŒè¯ Coze API æ ¸å¿ƒåŠŸèƒ½
curl -X POST http://localhost:8000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message":"ä½ å¥½","user_id":"baseline_test"}'

# 2. éªŒè¯ä¼šè¯éš”ç¦»
python3 tests/test_simple.py

# 3. éªŒè¯äººå·¥æ¥ç®¡åŠŸèƒ½ï¼ˆå¦‚å·²å®ç°ï¼‰
python3 tests/test_æ ¸å¿ƒåŠŸèƒ½éªŒè¯.py
```

**é¢„æœŸç»“æœ**ï¼šæ‰€æœ‰æµ‹è¯•å¿…é¡» 100% é€šè¿‡ï¼Œå¦åˆ™**ä¸å¾—å¼€å§‹æ–°åŠŸèƒ½å¼€å‘**ã€‚

#### 1.3 è®¾è®¡å®¡æŸ¥

- [ ] æ–°åŠŸèƒ½çš„è®¾è®¡æ˜¯å¦éµå¾ª"å‰ç½®æ£€æŸ¥ + åç½®å¤„ç†"æ¨¡å¼ï¼Ÿ
- [ ] æ–°åŠŸèƒ½å¤±è´¥æ—¶æ˜¯å¦ä¼šå½±å“æ ¸å¿ƒ AI å¯¹è¯ï¼Ÿï¼ˆç­”æ¡ˆå¿…é¡»æ˜¯"å¦"ï¼‰
- [ ] æ˜¯å¦éœ€è¦æ·»åŠ æ–°çš„çº¦æŸæ¡æ¬¾ï¼Ÿï¼ˆå¦‚éœ€è¦ï¼Œå…ˆæ›´æ–°çº¦æŸæ–‡æ¡£ï¼‰

---

### ğŸŸ¡ é˜¶æ®µ2: å¼€å‘ä¸­çº¦æŸï¼ˆDuring Developmentï¼‰

#### 2.1 Coze API è°ƒç”¨å¼ºåˆ¶çº¦æŸ

**å¦‚æœæ–°åŠŸèƒ½æ¶‰åŠ Coze API è°ƒç”¨ï¼Œå¿…é¡»éµå®ˆä»¥ä¸‹é“å¾‹**ï¼š

##### é“å¾‹1: ä¸å¯ä¿®æ”¹æ ¸å¿ƒ API æ¥å£

```python
# âŒ ç¦æ­¢ - ä¿®æ”¹æ ¸å¿ƒæ¥å£é€»è¾‘
@app.post("/api/chat")
async def chat(request: ChatRequest):
    # ä¿®æ”¹äº† Coze API è°ƒç”¨æ–¹å¼
    response = await custom_coze_call(...)  # ç¦æ­¢ï¼

# âœ… å…è®¸ - å‰ç½®æ£€æŸ¥
@app.post("/api/chat")
async def chat(request: ChatRequest):
    # å‰ç½®æ£€æŸ¥ï¼ˆæ–°å¢é€»è¾‘ï¼‰
    if session_state.status in [PENDING_MANUAL, MANUAL_LIVE]:
        raise HTTPException(status_code=409, detail="MANUAL_IN_PROGRESS")

    # åŸæœ‰ Coze API è°ƒç”¨é€»è¾‘ï¼ˆå®Œå…¨ä¸åŠ¨ï¼‰
    access_token = token_manager.get_access_token(session_name=session_id)
    async with async_http_client.stream(...) as response:
        # åŸæœ‰è§£æé€»è¾‘
```

##### é“å¾‹2: Coze API è°ƒç”¨è§„èŒƒ

- âœ… å¿…é¡»ä½¿ç”¨ `stream()` æ–¹æ³•ï¼ˆä¸ä½¿ç”¨ `post()`ï¼‰
- âœ… å¿…é¡»ä»é¡¶å±‚æå– `type` å’Œ `content` å­—æ®µ
- âœ… å¿…é¡»åŒ…å« `workflow_id` å’Œ `app_id` å‚æ•°
- âœ… å¿…é¡»é€šè¿‡ `token_manager.get_access_token()` è·å– Token
- âœ… å¿…é¡»æ”¯æŒ `session_name` å‚æ•°å®ç°ä¼šè¯éš”ç¦»

**å‚è€ƒ**: `prd/CONSTRAINTS_AND_PRINCIPLES.md` ç¬¬2èŠ‚

##### é“å¾‹3: ä¼šè¯éš”ç¦»æœºåˆ¶

**å¼ºåˆ¶è¦æ±‚**ï¼šæ¯ä¸ªæ–°ä¼šè¯å¿…é¡»é¢„å…ˆè°ƒç”¨ `/api/conversation/new` åˆ›å»ºç‹¬ç«‹çš„ `conversation_id`

```python
# âŒ é”™è¯¯ - ç›´æ¥å‘é€æ¶ˆæ¯
POST /api/chat {
  "message": "ä½ å¥½",
  "user_id": "session_a"
  # ç¼ºå°‘ conversation_idï¼Œä¼šå¯¼è‡´ä¼šè¯éš”ç¦»å¤±è´¥ï¼
}

# âœ… æ­£ç¡® - é¢„å…ˆåˆ›å»º conversation
POST /api/conversation/new {"session_id": "session_a"}
# å“åº”: {"conversation_id": "7574681165306363909"}

POST /api/chat {
  "message": "ä½ å¥½",
  "user_id": "session_a",
  "conversation_id": "7574681165306363909"
}
```

**éªŒè¯ä¾æ®**: `docs/æ ¸å¿ƒåŠŸèƒ½å…¨é¢éªŒè¯æŠ¥å‘Š.md` ç¬¬2èŠ‚ï¼Œ`prd/CONSTRAINTS_AND_PRINCIPLES.md` çº¦æŸ5

#### 2.2 ä»£ç å®ç°æ£€æŸ¥æ¸…å•

åœ¨ç¼–å†™ä»£ç æ—¶ï¼ŒæŒç»­æ£€æŸ¥ï¼š

- [ ] æ–°å¢ä»£ç æ˜¯å¦éµå¾ªç°æœ‰ä»£ç é£æ ¼ï¼Ÿ
- [ ] æ˜¯å¦æ·»åŠ äº†å……è¶³çš„é”™è¯¯å¤„ç†ï¼Ÿ
- [ ] æ–°åŠŸèƒ½å¤±è´¥æ—¶æ˜¯å¦ä¼šæŠ›å‡ºå¼‚å¸¸å¹¶é˜»å¡æ ¸å¿ƒåŠŸèƒ½ï¼Ÿï¼ˆä¸åº”é˜»å¡ï¼‰
- [ ] æ˜¯å¦æ·»åŠ äº†ç»“æ„åŒ–æ—¥å¿—è®°å½•ï¼Ÿ
- [ ] æ•æ„Ÿä¿¡æ¯æ˜¯å¦å·²è„±æ•ï¼Ÿï¼ˆTokenã€å¯†ç ç­‰ï¼‰

---

### ğŸŸ¢ é˜¶æ®µ3: å¼€å‘åéªŒè¯ï¼ˆPost-Development Verificationï¼‰

**æ¯å®Œæˆä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹éªŒè¯æ­¥éª¤**ï¼š

#### 3.1 å•å…ƒæµ‹è¯• & é›†æˆæµ‹è¯•

```bash
# 1. è¿è¡Œæ–°åŠŸèƒ½çš„ä¸“é¡¹æµ‹è¯•
python3 tests/test_æ–°åŠŸèƒ½.py

# 2. è¿è¡Œæ ¸å¿ƒåŠŸèƒ½å›å½’æµ‹è¯•
python3 tests/test_æ ¸å¿ƒåŠŸèƒ½éªŒè¯.py

# 3. è¿è¡Œä¼šè¯éš”ç¦»æµ‹è¯•
python3 tests/test_simple.py
```

**å¼ºåˆ¶è¦æ±‚**ï¼š
- æ–°åŠŸèƒ½æµ‹è¯•é€šè¿‡ç‡å¿…é¡» 100%
- æ ¸å¿ƒåŠŸèƒ½å›å½’æµ‹è¯•å¿…é¡» 100% é€šè¿‡ï¼ˆ15/15ï¼‰
- ä¼šè¯éš”ç¦»æµ‹è¯•å¿…é¡»é€šè¿‡

**å¦‚æœä»»ä½•æµ‹è¯•å¤±è´¥**ï¼š
1. ğŸ”´ ç«‹å³åœæ­¢éƒ¨ç½²
2. ğŸ”´ åˆ†æå¤±è´¥åŸå› ï¼ˆæ˜¯å¦ç ´åäº†æ ¸å¿ƒåŠŸèƒ½ï¼Ÿï¼‰
3. ğŸ”´ ä¿®å¤é—®é¢˜æˆ–å›æ»šä»£ç 
4. ğŸ”´ é‡æ–°è¿è¡Œæ‰€æœ‰æµ‹è¯•

#### 3.2 çº¦æŸéµå®ˆéªŒè¯

è¿è¡Œçº¦æŸæ£€æŸ¥æ¸…å•ï¼ˆ`prd/CONSTRAINTS_AND_PRINCIPLES.md` ç¬¬9èŠ‚ï¼‰ï¼š

- [ ] Coze API çº¦æŸæ£€æŸ¥ï¼ˆ5é¡¹ï¼‰
- [ ] æ ¸å¿ƒæ¥å£å…¼å®¹æ€§æ£€æŸ¥ï¼ˆ4é¡¹ï¼‰
- [ ] æ–°åŠŸèƒ½ç‹¬ç«‹æ€§æ£€æŸ¥ï¼ˆ4é¡¹ï¼‰
- [ ] åŠŸèƒ½æµ‹è¯•ï¼ˆ4é¡¹åœºæ™¯ï¼‰

#### 3.3 æ‰‹åŠ¨éªŒè¯åœºæ™¯

```bash
# åœºæ™¯1: AI å¯¹è¯åŠŸèƒ½æ­£å¸¸
curl -X POST http://localhost:8000/api/chat \
  -d '{"message":"ä½ å¥½","user_id":"test_001"}'
# é¢„æœŸ: è¿”å› AI å›å¤

# åœºæ™¯2: æµå¼å¯¹è¯åŠŸèƒ½æ­£å¸¸
curl -X POST http://localhost:8000/api/chat/stream \
  -d '{"message":"ä½ å¥½","user_id":"test_002"}' --no-buffer
# é¢„æœŸ: å®æ—¶ SSE æµ

# åœºæ™¯3: ä¼šè¯éš”ç¦»æ­£å¸¸
# (åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹ sessionï¼ŒéªŒè¯ä¸Šä¸‹æ–‡ä¸å…±äº«)

# åœºæ™¯4: æ–°åŠŸèƒ½æ­£å¸¸
# (æ ¹æ®å…·ä½“åŠŸèƒ½ç¼–å†™æµ‹è¯•åœºæ™¯)
```

---

### ğŸ”µ é˜¶æ®µ4: æ–‡æ¡£åŒæ­¥æ›´æ–°ï¼ˆMandatory Documentation Updateï¼‰

**æ¯å®Œæˆä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå¿…é¡»åŒæ­¥æ›´æ–°ä»¥ä¸‹æ–‡æ¡£**ï¼š

#### 4.1 å¿…é¡»æ›´æ–°çš„æ–‡æ¡£

1. **`prd/prd.md`** ï¼ˆæœ¬æ–‡æ¡£ï¼‰
   - [ ] æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯å’Œå®ŒæˆçŠ¶æ€
   - [ ] å¦‚å¼•å…¥æ–°çš„ APIï¼Œåœ¨ç¬¬9èŠ‚"APIåˆ—è¡¨"ä¸­æ·»åŠ 
   - [ ] å¦‚ä¿®æ”¹äº†æ•°æ®ç»“æ„ï¼Œæ›´æ–°ç¬¬8èŠ‚

2. **`README.md`**
   - [ ] æ·»åŠ æ–° API çš„ä½¿ç”¨æ–‡æ¡£ï¼ˆè¯·æ±‚/å“åº”ç¤ºä¾‹ï¼‰
   - [ ] æ›´æ–°ç‰ˆæœ¬å†å²ï¼ˆv2.x.xï¼‰
   - [ ] å¦‚æœ‰æ–°çš„æµ‹è¯•è„šæœ¬ï¼Œæ›´æ–°æµ‹è¯•ç« èŠ‚

3. **`prd/CONSTRAINTS_AND_PRINCIPLES.md`**
   - [ ] å¦‚å‘ç°æ–°çš„çº¦æŸæ¡æ¬¾ï¼Œæ·»åŠ åˆ°"å¼€å‘è¿‡ç¨‹ä¸­çš„æ–°å‘ç°çº¦æŸ"ç« èŠ‚
   - [ ] æ›´æ–°éªŒè¯çŠ¶æ€è¡¨æ ¼
   - [ ] å¦‚æœ‰æ–°çš„æ£€æŸ¥é¡¹ï¼Œæ·»åŠ åˆ°å¼€å‘æ£€æŸ¥æ¸…å•

4. **`prd/TECHNICAL_SOLUTION_v1.0.md`**
   - [ ] å¦‚æœ‰æ–°çš„æŠ€æœ¯å®ç°ï¼Œæ·»åŠ åˆ°å¯¹åº”ç« èŠ‚
   - [ ] æ›´æ–°å®ç°éªŒè¯ç»“æœ
   - [ ] å¦‚æœ‰æ–°çš„æ€§èƒ½æ•°æ®ï¼Œæ›´æ–°æ€§èƒ½ç« èŠ‚

5. **å®Œæˆæ€»ç»“æ–‡æ¡£** ï¼ˆæ–°å»ºæˆ–æ›´æ–°ï¼‰
   - [ ] åˆ›å»º `docs/PX-åŠŸèƒ½åç§°-å®Œæˆæ€»ç»“.md`
   - [ ] è®°å½•åŠŸèƒ½å®ç°è¿‡ç¨‹ã€é‡åˆ°çš„é—®é¢˜ã€è§£å†³æ–¹æ¡ˆ
   - [ ] è®°å½•æµ‹è¯•ç»“æœå’ŒéªŒè¯æ•°æ®

#### 4.2 æ–°çº¦æŸã€æ¥å£ã€é™åˆ¶çš„è¯´æ˜è¦æ±‚

**å¦‚æœå¼•å…¥äº†ä»¥ä¸‹å†…å®¹ï¼Œå¿…é¡»åœ¨çº¦æŸæ–‡æ¡£ä¸­è¯¦ç»†è¯´æ˜**ï¼š

##### æ–°å¢çº¦æŸ

```markdown
### çº¦æŸX: [çº¦æŸåç§°]

**å‘ç°æ—¥æœŸ**: YYYY-MM-DD
**é—®é¢˜**: [æè¿°å‘ç°çš„é—®é¢˜]
**æ ¹æœ¬åŸå› **: [åˆ†æé—®é¢˜çš„æ ¹æœ¬åŸå› ]

**å¼ºåˆ¶çº¦æŸ**:
[ä»£ç ç¤ºä¾‹ - é”™è¯¯åšæ³•]
[ä»£ç ç¤ºä¾‹ - æ­£ç¡®åšæ³•]

**éªŒè¯ä»£ç ä½ç½®**: [æµ‹è¯•æ–‡ä»¶:è¡Œå·]
**å‚è€ƒæ–‡æ¡£**: [ç›¸å…³æ–‡æ¡£é“¾æ¥]
```

##### æ–°å¢ API æ¥å£

åœ¨ `prd/prd.md` ç¬¬9èŠ‚æ·»åŠ ï¼š

```markdown
### X. [æ¥å£åç§°] â­ **æ–°å¢**

**è¯·æ±‚**:
```bash
[è¯·æ±‚ç¤ºä¾‹]
```

**å“åº”**:
```json
[å“åº”ç¤ºä¾‹]
```

**è¯´æ˜**:
- [åŠŸèƒ½æè¿°]
- [å‚æ•°è¯´æ˜]
- [é”™è¯¯ç è¯´æ˜]

**ç›¸å…³çº¦æŸ**: [å…³è”çš„çº¦æŸæ¡æ¬¾]
```

##### æ–°å¢é™åˆ¶

```markdown
### é™åˆ¶X: [é™åˆ¶åç§°]

**é€‚ç”¨èŒƒå›´**: [å“ªäº›åŠŸèƒ½å—æ­¤é™åˆ¶]
**é™åˆ¶å†…å®¹**: [å…·ä½“é™åˆ¶æ˜¯ä»€ä¹ˆ]
**åŸå› **: [ä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªé™åˆ¶]
**ç»•è¿‡æ–¹æ³•**: [å¦‚æœæœ‰ï¼Œå¦‚ä½•åœ¨ä¸è¿åçº¦æŸçš„æƒ…å†µä¸‹å®ç°éœ€æ±‚]
```

##### æ–°å¢è§„èŒƒ

```markdown
### è§„èŒƒX: [è§„èŒƒåç§°]

**é€‚ç”¨åœºæ™¯**: [ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»éµå®ˆæ­¤è§„èŒƒ]
**è§„èŒƒå†…å®¹**: [å…·ä½“è¦æ±‚]
**æ­£ç¡®ç¤ºä¾‹**: [ä»£ç ç¤ºä¾‹]
**é”™è¯¯ç¤ºä¾‹**: [ä»£ç ç¤ºä¾‹]
```

---

### ğŸš¨ è¿è§„å¤„ç†

#### è½»åº¦è¿è§„ï¼ˆCode Review æ‹’ç»ï¼‰

ä»¥ä¸‹æƒ…å†µè§†ä¸ºè½»åº¦è¿è§„ï¼Œéœ€è¦é‡æ„ä»£ç ï¼š

- æœªè¿è¡ŒåŸºçº¿æµ‹è¯•å°±å¼€å§‹å¼€å‘
- ä»£ç é£æ ¼ä¸ä¸€è‡´
- ç¼ºå°‘é”™è¯¯å¤„ç†
- æœªæ·»åŠ æ—¥å¿—è®°å½•
- æ–‡æ¡£æœªåŒæ­¥æ›´æ–°

**å¤„ç†**: ä»£ç å®¡æŸ¥æ‹’ç»ï¼Œè¦æ±‚ä¿®æ”¹åé‡æ–°æäº¤

#### é‡åº¦è¿è§„ï¼ˆç«‹å³å›æ»šï¼‰

ä»¥ä¸‹æƒ…å†µè§†ä¸ºé‡åº¦è¿è§„ï¼Œéœ€è¦ç«‹å³å›æ»šä»£ç ï¼š

- ä¿®æ”¹äº† Coze API æ ¸å¿ƒè°ƒç”¨é€»è¾‘
- ç ´åäº†ä¼šè¯éš”ç¦»æœºåˆ¶
- æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•å¤±è´¥
- è¿åäº†é“å¾‹1-3ä¸­çš„ä»»æ„ä¸€æ¡
- æ–°åŠŸèƒ½å¼‚å¸¸å¯¼è‡´æ ¸å¿ƒåŠŸèƒ½å¤±è´¥

**å¤„ç†**: ç«‹å³å›æ»šä»£ç ï¼Œé‡æ–°è®¾è®¡ï¼Œé€šè¿‡è¯„å®¡åå†å¼€å‘

---

### ğŸ“Š è´¨é‡æ£€æŸ¥è¡¨ï¼ˆæ¯æ¬¡å¼€å‘å¿…æŸ¥ï¼‰

**åœ¨æäº¤ä»£ç å‰ï¼Œç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ç›®å‡ä¸º âœ…**ï¼š

#### å¼€å‘å‰
- [ ] å·²é˜…è¯»æ‰€æœ‰çº¦æŸæ–‡æ¡£
- [ ] å·²è¿è¡ŒåŸºçº¿æµ‹è¯•ï¼ˆ100% é€šè¿‡ï¼‰
- [ ] å·²ç¡®è®¤ä¸ä¼šä¿®æ”¹æ ¸å¿ƒ API é€»è¾‘

#### å¼€å‘ä¸­
- [ ] éµå®ˆ Coze API è°ƒç”¨è§„èŒƒ
- [ ] æ–°åŠŸèƒ½é‡‡ç”¨"å‰ç½®æ£€æŸ¥ + åç½®å¤„ç†"æ¨¡å¼
- [ ] æ·»åŠ äº†å……è¶³çš„é”™è¯¯å¤„ç†
- [ ] æ·»åŠ äº†ç»“æ„åŒ–æ—¥å¿—
- [ ] æ•æ„Ÿä¿¡æ¯å·²è„±æ•

#### å¼€å‘å
- [ ] æ–°åŠŸèƒ½å•å…ƒæµ‹è¯•é€šè¿‡ï¼ˆ100%ï¼‰
- [ ] æ ¸å¿ƒåŠŸèƒ½å›å½’æµ‹è¯•é€šè¿‡ï¼ˆ15/15ï¼‰
- [ ] ä¼šè¯éš”ç¦»æµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨éªŒè¯åœºæ™¯é€šè¿‡ï¼ˆ4ä¸ªåœºæ™¯ï¼‰
- [ ] çº¦æŸæ£€æŸ¥æ¸…å•é€šè¿‡ï¼ˆ13é¡¹ï¼‰

#### æ–‡æ¡£æ›´æ–°
- [ ] å·²æ›´æ–° prd/prd.md
- [ ] å·²æ›´æ–° README.md
- [ ] å·²æ›´æ–°çº¦æŸæ–‡æ¡£ï¼ˆå¦‚æœ‰æ–°çº¦æŸï¼‰
- [ ] å·²æ›´æ–°æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£
- [ ] å·²åˆ›å»ºå®Œæˆæ€»ç»“æ–‡æ¡£

#### æ–°å¢å†…å®¹è¯´æ˜
- [ ] æ–°çº¦æŸå·²è®°å½•å¹¶è¯´æ˜
- [ ] æ–°æ¥å£å·²è®°å½•å¹¶è¯´æ˜
- [ ] æ–°é™åˆ¶å·²è®°å½•å¹¶è¯´æ˜
- [ ] æ–°è§„èŒƒå·²è®°å½•å¹¶è¯´æ˜

---

### ğŸ¯ å¼€å‘æµç¨‹æ€»ç»“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ1: å¼€å‘å‰å®¡æŸ¥                                        â”‚
â”‚  â€¢ é˜…è¯»çº¦æŸæ–‡æ¡£                                           â”‚
â”‚  â€¢ è¿è¡ŒåŸºçº¿æµ‹è¯•ï¼ˆå¿…é¡»100%é€šè¿‡ï¼‰                           â”‚
â”‚  â€¢ è®¾è®¡å®¡æŸ¥                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ é€šè¿‡ âœ…
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ2: å¼€å‘ä¸­çº¦æŸ                                        â”‚
â”‚  â€¢ éµå®ˆ Coze API è°ƒç”¨è§„èŒƒ                                â”‚
â”‚  â€¢ éµå®ˆä¼šè¯éš”ç¦»æœºåˆ¶                                       â”‚
â”‚  â€¢ æŒç»­æ£€æŸ¥ä»£ç è´¨é‡                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ å®Œæˆå¼€å‘
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ3: å¼€å‘åéªŒè¯                                        â”‚
â”‚  â€¢ å•å…ƒæµ‹è¯• & é›†æˆæµ‹è¯•ï¼ˆå¿…é¡»100%é€šè¿‡ï¼‰                    â”‚
â”‚  â€¢ çº¦æŸéµå®ˆéªŒè¯ï¼ˆ13é¡¹æ£€æŸ¥ï¼‰                               â”‚
â”‚  â€¢ æ‰‹åŠ¨éªŒè¯åœºæ™¯ï¼ˆ4ä¸ªåœºæ™¯ï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ å…¨éƒ¨é€šè¿‡ âœ…
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ4: æ–‡æ¡£åŒæ­¥æ›´æ–°                                      â”‚
â”‚  â€¢ æ›´æ–° 5 ä¸ªæ ¸å¿ƒæ–‡æ¡£                                      â”‚
â”‚  â€¢ è¯´æ˜æ–°çº¦æŸã€æ¥å£ã€é™åˆ¶ã€è§„èŒƒ                           â”‚
â”‚  â€¢ åˆ›å»ºå®Œæˆæ€»ç»“æ–‡æ¡£                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ æ–‡æ¡£å®Œæˆ âœ…
                 â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”
              â”‚ å®Œæˆ â”‚
              â””â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒç†å¿µ**ï¼š**åœ¨åŸæœ‰åŠŸèƒ½åŸºç¡€ä¸Šæ‰©å±•ï¼Œè€Œéæ›¿æ¢æˆ–ä¿®æ”¹**

---

## ğŸ“š æ ¸å¿ƒçº¦æŸæ€»ç»“ï¼ˆæˆªè‡³ P0-6ï¼‰â­ **å¿…è¯»**

### åç«¯çº¦æŸ (çº¦æŸ 1-8)

è¯¦è§ `prd/CONSTRAINTS_AND_PRINCIPLES.md`

1. **é“å¾‹1: ä¸å¯ä¿®æ”¹æ ¸å¿ƒ API æ¥å£** - Coze API è°ƒç”¨é€»è¾‘ä¸å¯å˜
2. **é“å¾‹2: Coze API è°ƒç”¨è§„èŒƒ** - ä½¿ç”¨ stream()ã€è§£æé¡¶å±‚å­—æ®µã€åŒ…å«å¿…éœ€å‚æ•°
3. **é“å¾‹3: OAuth+JWT é‰´æƒ** - session_name éš”ç¦»ã€Token ç®¡ç†
4. **çº¦æŸ4: EscalationReason æšä¸¾å€¼å¼ºåˆ¶éªŒè¯** - å¿…é¡»ä½¿ç”¨é¢„å®šä¹‰æšä¸¾å€¼
5. **çº¦æŸ5: ä¼šè¯éš”ç¦»çš„æ­£ç¡®å®ç°æ–¹å¼** - å¿…é¡»é¢„å…ˆè°ƒç”¨ `/api/conversation/new`
6. **çº¦æŸ6: API è·¯ç”±é¡ºåºè¦æ±‚** - å‚æ•°åŒ–è·¯ç”±å¿…é¡»æ”¾åœ¨æœ€å
7. **çº¦æŸ7: æ•æ„Ÿä¿¡æ¯å¤„ç†** - æ—¥å¿—ä¸­è„±æ•ã€ä¸æš´éœ²Token
8. **çº¦æŸ8: é”™è¯¯ä¿¡æ¯å¤„ç†** - ä¸æš´éœ²å†…éƒ¨å®ç°ç»†èŠ‚

### å‰ç«¯çº¦æŸ (çº¦æŸ 9-12) â­ **P0-4/P0-6 æ–°å¢**

è¯¦è§ `prd/CONSTRAINTS_AND_PRINCIPLES.md` ç¬¬803-975è¡Œ

9. **çº¦æŸ9: å‰ç«¯çŠ¶æ€å˜æ›´è§„èŒƒ** - å¿…é¡»ä½¿ç”¨ `updateSessionStatus()` æ–¹æ³•ä¿®æ”¹çŠ¶æ€
   - âŒ ç¦æ­¢: `sessionStatus.value = 'manual_live'`
   - âœ… æ­£ç¡®: `updateSessionStatus('manual_live')`
   - å½±å“: `canEscalate` è®¡ç®—å±æ€§ã€è½¬äººå·¥æŒ‰é’®ç¦ç”¨é€»è¾‘

10. **çº¦æŸ10: ç³»ç»Ÿæ¶ˆæ¯æ ¼å¼è§„èŒƒ** - ç»Ÿä¸€ç³»ç»Ÿæ¶ˆæ¯æ ¼å¼
    - `id`: å¿…é¡»ä»¥ `'system-'` å¼€å¤´
    - `role`: å¿…é¡»ä¸º `'system'`
    - `sender`: å¿…é¡»ä¸º `'System'`
    - `timestamp`: ä½¿ç”¨ `new Date()` å¯¹è±¡
    - é€‚ç”¨åœºæ™¯: è½¬äººå·¥æç¤ºã€ä¼šè¯åˆ†éš”çº¿ã€äººå·¥æ¥å…¥/ç»“æŸé€šçŸ¥

11. **çº¦æŸ11: ç”¨æˆ·äº¤äº’ç¡®è®¤è§„èŒƒ** - é‡è¦æ“ä½œå¿…é¡»ç¡®è®¤
    - è½¬äººå·¥ã€æ–°å»ºå¯¹è¯ã€åˆ é™¤æ•°æ®ç­‰æ“ä½œå¿…é¡»ä½¿ç”¨ `confirm()` ç¡®è®¤
    - ç”¨æˆ·å–æ¶ˆæ—¶ç«‹å³è¿”å›ï¼Œä¸æ‰§è¡Œæ“ä½œ
    - ç¡®è®¤æ–‡æ¡ˆæ¸…æ™°æ˜ç¡®

12. **çº¦æŸ12: è®¡ç®—å±æ€§ä¾èµ–ç®¡ç†** - é¿å…å¾ªç¯ä¾èµ–
    - è®¡ç®—å±æ€§åªä¾èµ– ref çŠ¶æ€ï¼Œä¸ä¾èµ–å…¶ä»–è®¡ç®—å±æ€§
    - å½“å‰ä¾èµ–å›¾:
      - `canEscalate` â†’ `sessionStatus`, `isEscalating`
      - `canSendMessage` â†’ `isLoading`, `sessionStatus`
      - `statusText` â†’ `sessionStatus`, `agentInfo`

### çº¦æŸè¿è§„å¤„ç†

- **è½»åº¦è¿è§„**: ä»£ç å®¡æŸ¥æ‹’ç»ï¼Œè¦æ±‚ä¿®æ”¹åé‡æ–°æäº¤
- **é‡åº¦è¿è§„**: ç«‹å³å›æ»šï¼Œé‡æ–°è®¾è®¡ï¼Œé€šè¿‡è¯„å®¡åå†å¼€å‘

---

## 1. ç°çŠ¶ä¸åŸºçº¿

- **åç«¯**ï¼šFastAPI å•ä½“ï¼Œ`OAuthTokenManager` è´Ÿè´£ä¸º Coze Workflow ç”Ÿæˆå¸¦ `session_name` çš„ tokenã€‚`/api/chat/stream` ä»¥ SSE è¿”å› AI å›å¤ã€‚
- **å‰ç«¯**ï¼šVue3 + Vite + Piniaã€‚`chatStore.ts` ç®¡ç† `sessionId`ã€`conversationId`ã€`messages` ç­‰ï¼Œ`api/chat.ts` å°è£…ç°æœ‰æ¥å£ã€‚
- **ä¼šè¯éš”ç¦»**ï¼šå‰ç«¯ `sessionStorage` ä¸­çš„ `fiido_session_id` ä½œä¸º `ChatRequest.user_id`ï¼Œåç«¯è½¬æˆ JWT `session_name`ã€‚
- **æ¶ˆæ¯ç»“æ„**ï¼š`Message.role` ç›®å‰åŒ…æ‹¬ `user|assistant|system`ï¼Œå¯æ‰©å±•ã€‚
- **éƒ¨ç½²çº¦æŸ**ï¼šä¸ºé™ä½å¤æ‚åº¦ï¼ŒMVP é˜¶æ®µä¸å¼•å…¥ WebSocketã€Redis ç­‰æ–°ä¾èµ–ï¼Œæœ€å¤§ç¨‹åº¦å¤ç”¨ç°æœ‰ SSE å’Œå†…å­˜èƒ½åŠ›ã€‚

---

## 2. é¡¹ç›®ç›®æ ‡ï¼ˆé˜¶æ®µåˆ’åˆ†ï¼‰


| é˜¶æ®µ         | ç›®æ ‡                                                           | å…³é”®äº§å‡º                                                                       |
| ------------ | -------------------------------------------------------------- | ------------------------------------------------------------------------------ |
| **P0 (MVP)** | å®ç° AI ç›‘ç®¡ + æ‰‹åŠ¨/ç³»ç»Ÿè§¦å‘äººå·¥ + äººå·¥æ¶ˆæ¯é€šé“ + å‰ç«¯çŠ¶æ€å±•ç¤º | SessionStateStoreï¼ˆå†…å­˜ç‰ˆï¼‰ã€Regulatorã€4 ä¸ªæ ¸å¿ƒ APIã€å‰ç«¯çŠ¶æ€æç¤ºã€äººå·¥æ¶ˆæ¯æµ |
| **P1**       | å¼•å…¥å·¥ä½œæ—¶é—´åˆ¤æ–­ã€é‚®ä»¶é€šçŸ¥ã€åå¸­å·¥ä½œå°ã€ä¼šè¯åˆ—è¡¨               | ShiftConfigã€é‚®ä»¶æ¨¡å—ã€å·¥ä½œå°ï¼ˆå¯ç‹¬ç«‹ Vue é¡¹ç›®ï¼‰ã€åå¸­æ¥å…¥æ¥å£                 |
| **P2**       | èƒ½åŠ›å¢å¼º                                                       | WebSocket/Redis/ç›‘æ§/æƒ…ç»ªè¯†åˆ«/å®¡è®¡æŸ¥è¯¢                                         |

---

## 3. èŒƒå›´


| åŒ…å«                | è¯´æ˜                                        |
| ------------------- | ------------------------------------------- |
| Vue ç”¨æˆ·ç«¯æ”¹é€       | çŠ¶æ€æç¤ºã€äººå·¥æ¶ˆæ¯æ¸²æŸ“ã€ä¼šè¯è¯¦æƒ…            |
| FastAPI æ‰©å±•        | SessionStateStoreã€ç›‘ç®¡é€»è¾‘ã€äººå·¥æ¥å£ã€æ—¥å¿— |
| é‚®ä»¶/å·¥ä½œæ—¶é—´ï¼ˆP1ï¼‰ | ShiftConfigã€é‚®ä»¶è§¦å‘                       |
| å·¥ä½œå°ï¼ˆP1ï¼‰        | ç‹¬ç«‹ Vue å­é¡¹ç›® æˆ– åŒä¸€ä»“åº“å­ç›®å½•           |


| ä¸åŒ…å«                | è¯´æ˜                            |
| --------------------- | ------------------------------- |
| CRM / å·¥å•ç³»ç»Ÿå¯¹æ¥    | æš‚ä¸é›†æˆå¤–éƒ¨ç³»ç»Ÿ                |
| ç§»åŠ¨åå¸­ App          | ä»… Web                          |
| WebSocket/Redisï¼ˆP0ï¼‰ | MVP ä½¿ç”¨ SSE + å†…å­˜ï¼Œåç»­å†å‡çº§ |

---

## 4. æ ¸å¿ƒæ¦‚å¿µä¸çŠ¶æ€

- `session_name`ï¼šæ²¿ç”¨ç°æœ‰ `sessionId`ã€‚
- `conversation_id`ï¼šä½¿ç”¨ `/api/conversation/new` ç»“æœï¼Œäººå·¥æœŸé—´ä¿æŒä¸å˜ã€‚
- `Message.role`ï¼šæ‰©å±•ä¸º `user | assistant | system | agent`ï¼Œå½“ `role='agent'` æ—¶é™„å¸¦ `agent_info`ï¼ˆåå¸­ç¼–å·/æ˜µç§°ï¼‰ã€‚
- **ä¼šè¯çŠ¶æ€**ï¼š`bot_active` â†’ `pending_manual` â†’ `manual_live` â†’ `bot_active/closed`ï¼›éå·¥ä½œæ—¶é—´è§¦å‘ `after_hours_email`ã€‚
- **SessionStateStore**ï¼šMVP ä½¿ç”¨å†…å­˜ dict + é”ï¼›è®°å½•æ ¸å¿ƒå­—æ®µå¹¶é™åˆ¶å†å²é•¿åº¦ï¼Œç»“æ„è§ Â§8ã€‚

---

## 5. åŠŸèƒ½éœ€æ±‚

### 5.1 ç”¨æˆ·å‰ç«¯ï¼ˆVueï¼‰

1. **çŠ¶æ€æ¡**ï¼šåœ¨èŠå¤©é¢æ¿é¡¶éƒ¨æ˜¾ç¤º `AI æœåŠ¡ä¸­` / `ç­‰å¾…äººå·¥` / `äººå·¥æ¥å…¥` / `éå·¥ä½œæ—¶é—´`ï¼Œé¢œè‰²åŒºåˆ†ã€‚
2. **æ¶ˆæ¯æ¸²æŸ“**ï¼šå½“ `role='agent'` æ—¶ä½¿ç”¨äººå·¥å¤´åƒ/åç§°ï¼›SSE ä¸­è‹¥è¿”å› `type='manual_message'` äº¦å†™å…¥ `messages`ã€‚
3. **è¾“å…¥è¡Œä¸º**ï¼š
   - `bot_active`ï¼šè°ƒç”¨ç°æœ‰ `/api/chat/stream`ã€‚
   - `manual_live`ï¼šè°ƒç”¨ `POST /api/manual/messages`ï¼ˆrole=`user`ï¼‰ï¼ŒSSE æ¨é€äººå·¥å›å¤ã€‚
   - `pending_manual`ï¼šç¦ç”¨è¾“å…¥æˆ–æç¤ºâ€œç­‰å¾…åå¸­â€ã€‚
4. **å†å²å›å¡«**ï¼šæ‰“å¼€é¢æ¿æˆ–åˆ·æ–°åè°ƒç”¨ `GET /api/sessions/{session_name}`ï¼ˆè‹¥å­˜åœ¨ï¼‰å¡«å…… `messages` å¹¶åŒæ­¥ `sessionStatus`ã€‚
5. **éå·¥ä½œæ—¶é—´æç¤ºï¼ˆP1ï¼‰**ï¼šè‹¥çŠ¶æ€ä¸º `after_hours_email`ï¼Œæ˜¾ç¤ºé‚®ç®±è¯´æ˜å’Œå¯é€‰çš„è”ç³»ç”µè¯è¾“å…¥ã€‚

### 5.2 åç«¯ï¼ˆFastAPIï¼‰

1. **SessionStateStoreï¼ˆP0ï¼‰**
   - è½»é‡æ•°æ®ç»“æ„ï¼ˆè§ Â§8ï¼‰ï¼Œæä¾› `get/save/append_history/transition`ã€‚
   - å†…å­˜å®ç° + å®šæ—¶å†™å…¥ JSON æ–‡ä»¶å¤‡ä»½ï¼Œæ–¹ä¾¿é‡å¯æ¢å¤ã€‚
2. **Regulatorï¼ˆP0ï¼‰**
   - è§„åˆ™ï¼šå…³é”®è¯ã€è¿ç»­å¤±è´¥ï¼ˆAI fallback 3 æ¬¡ï¼‰ã€VIPï¼ˆparameters.vip=trueï¼‰ã€‚æƒ…ç»ªæ£€æµ‹å»¶åï¼ˆP2ï¼‰ã€‚
   - ä¼˜å…ˆçº§ï¼šVIP > å…³é”®è¯ > è¿ç»­å¤±è´¥ã€‚
   - è¾“å‡º `{should_escalate, reason, severity, details}`ã€‚
3. **Chat æ¥å£æ”¹é€ ï¼ˆP0ï¼‰**
   - è¯·æ±‚è¿›å…¥ `/api/chat` æˆ– `/api/chat/stream` å‰æ‹‰èµ· SessionStateã€‚
   - å½“çŠ¶æ€ä¸º `manual_live` æ—¶ç«‹å³è¿”å› 409 `{success:false,error:'MANUAL_IN_PROGRESS'}`ã€‚
   - SSE ç®¡é“å†…å¯ç©¿æ’äººå·¥äº‹ä»¶ï¼šäººå·¥æ¶ˆæ¯ç”±æœåŠ¡ç«¯æ’å…¥ SSE æµ `data: {"type":"manual_message", ...}`ï¼Œæ— éœ€ WebSocketã€‚
4. **æ ¸å¿ƒ APIï¼ˆP0ï¼‰**
   1. `POST /api/manual/escalate` â€” ç”¨æˆ·æˆ–ç³»ç»Ÿè§¦å‘äººå·¥ã€‚
   2. `GET /api/sessions/{session_name}` â€” æŸ¥è¯¢ SessionStateã€‚
   3. `POST /api/manual/messages` â€” äººå·¥é€šé“æ¶ˆæ¯ï¼ˆrole=`agent`/`user`ï¼‰ã€‚
   4. `POST /api/sessions/{session_name}/release` â€” ç»“æŸäººå·¥ï¼Œå†™ç³»ç»Ÿæ¶ˆæ¯â€œäººå·¥ç»“æŸï¼ŒAI å·²æ¥ç®¡â€ã€‚
5. **æ‰©å±• APIï¼ˆP1ï¼‰**
   - `GET /api/sessions`ã€`POST /api/sessions/{session_name}/takeover`ï¼ˆå·¥ä½œå°ä½¿ç”¨ï¼‰ã€‚
   - `POST /api/sessions/{session_name}/email`ï¼ˆé‚®ä»¶è½¬äº¤ï¼‰ã€‚
   - `GET /api/shift/config`ï¼ˆå·¥ä½œæ—¶é—´é…ç½®ï¼‰ã€‚
6. **æ—¥å¿—ä¸é‰´æƒ**
   - æ‰€æœ‰çŠ¶æ€å˜æ›´å†™å…¥ `backend.log` JSON è¡Œï¼š`event`, `session_name`, `status_from`, `status_to`, `operator`, `timestamp`.
   - äººå·¥æ¥å£ï¼ˆé™¤ç”¨æˆ·ä¾§ escalate/manual messageï¼‰éœ€ `Authorization: Bearer <JWT>`ï¼ŒJWT ä¸­åŒ…å« `role`ã€‚`src/jwt_signer.py` éœ€æ”¯æŒè‡ªå®šä¹‰ claimsã€‚
7. **å®æ—¶æ¨é€ç­–ç•¥ï¼ˆP0ï¼‰**
   - MVP ä¿æŒ SSEï¼š`/api/chat/stream` ç»§ç»­ä½œä¸ºå”¯ä¸€äº‹ä»¶æµã€‚äººå·¥æ¶ˆæ¯é€šè¿‡åç«¯äº‹ä»¶é˜Ÿåˆ—æ’å…¥ SSE å“åº”ï¼ˆæœåŠ¡å™¨ç«¯åœ¨ `manual_live` é˜¶æ®µç”Ÿæˆè‡ªå®šä¹‰äº‹ä»¶ï¼‰ã€‚
   - P1+ å¯å¼•å…¥ `/ws/...` WebSocketï¼Œä¸ºå·¥ä½œå°å’Œç”¨æˆ·ç«¯åˆ†åˆ«æä¾›å®æ—¶é€šé“ã€‚

### 5.3 äººå·¥å·¥ä½œå°ï¼ˆP1ï¼‰

- ä»¥ç‹¬ç«‹ Vue å­é¡¹ç›®æˆ– `frontend` å­è·¯ç”±å®ç°ï¼Œä»£ç éš”ç¦»ã€‚
- ä¾èµ– P1 APIï¼ˆsessions listã€takeoverã€emailï¼‰ã€‚
- æœ€å°èƒ½åŠ›ï¼šç™»å½•ï¼ˆJWT role=agentï¼‰ã€ä¼šè¯é˜Ÿåˆ—ã€å†å²æŸ¥çœ‹ã€å‘é€äººå·¥æ¶ˆæ¯ã€ç»“æŸæ¥ç®¡ã€‚
- åç»­èƒ½åŠ›ï¼ˆå¿«æ·çŸ­è¯­ã€æœç´¢ã€æ“ä½œå†å²ï¼‰æŒ‰ `prd/agent_workbench_tasks.md` è½åœ°ã€‚

---

## 6. ç›‘ç®¡è§¦å‘ç­–ç•¥


| ç­–ç•¥       | è¯´æ˜                                                  | è§¦å‘ç»“æœ                       |
| ---------- | ----------------------------------------------------- | ------------------------------ |
| å…³é”®è¯     | å‘½ä¸­é…ç½®å…³é”®è¯ï¼ˆé»˜è®¤ï¼šäººå·¥ã€çœŸäººã€æŠ•è¯‰ã€æ— æ³•è§£å†³ï¼‰    | `pending_manual`               |
| è¿ç»­å¤±è´¥   | AI å›å¤åŒ…å« fallback å…³é”®è¯ â‰¥3 æ¬¡                    | `pending_manual`               |
| VIP        | `parameters.vip=true` æˆ–ç”¨æˆ·æ ‡ç­¾ä¸­ `vip`              | ç›´æ¥`pending_manual`           |
| éå·¥ä½œæ—¶é—´ | å½“`pending_manual` ä¸” `ShiftConfig.is_in_shift=False` | `after_hours_email`ï¼ˆP1 é‚®ä»¶ï¼‰ |
| äººå·¥å¼ºåˆ¶   | åå¸­åœ¨å·¥ä½œå°ç‚¹å‡»æ¥å…¥ï¼ˆP1ï¼‰                            | ç›´æ¥`manual_live`              |

æƒ…ç»ªæ£€æµ‹ã€ä¸¥é‡æŠ•è¯‰åˆ†ç±»æ”¾å…¥ P2ã€‚

---

## 7. ä¸»è¦æµç¨‹

1. **AI æœåŠ¡**ï¼šé»˜è®¤ `bot_active`ï¼Œå‰ç«¯å‘é€æ¶ˆæ¯â†’åç«¯è°ƒç”¨ Cozeâ†’SSE æ¨é€ AI å›å¤â†’`history` è®°å½•ã€‚
2. **è§¦å‘äººå·¥**ï¼šRegulator å‘½ä¸­ â†’ æ›´æ–°çŠ¶æ€ `pending_manual` â†’ SSE æ¨é€ `{type:'status',status:'pending_manual'}` â†’ å‰ç«¯æç¤ºã€‚
3. **äººå·¥å¤„ç† (MVP)**ï¼šè¿ç»´æˆ–æ¨¡æ‹Ÿåå¸­è°ƒç”¨ APIï¼š
   - `POST /api/manual/messages` role=`agent` å‘é€äººå·¥å›å¤ï¼ŒSSE æ¨é€ç»™ç”¨æˆ·ã€‚
   - ç”¨æˆ·åœ¨ `manual_live` æ—¶è¾“å…¥ â†’ `POST /api/manual/messages` role=`user`ã€‚
4. **ç»“æŸäººå·¥**ï¼š`POST /release` â†’ çŠ¶æ€ `manual_live -> bot_active` â†’ ç³»ç»Ÿæ¶ˆæ¯ + SSE æç¤º â†’ ç”¨æˆ·å†æ¬¡ä½¿ç”¨ `/api/chat/stream`ã€‚
5. **éå·¥ä½œæ—¶é—´ (P1)**ï¼š`pending_manual` æ—¶åˆ¤æ–­ `ShiftConfig`ï¼›è‹¥ä¸åœ¨ç­æ¬¡ç›´æ¥ `after_hours_email` å¹¶è§¦å‘é‚®ä»¶ï¼ŒSSE æç¤ºâ€œæˆ‘ä»¬å°†é‚®ä»¶è·Ÿè¿›â€ã€‚
6. **å·¥ä½œå°æ¥å…¥ (P1)**ï¼šåå¸­ç™»å½• â†’ `GET /api/sessions?status=pending_manual` â†’ `takeover` â†’ é€šè¿‡ `/manual/messages` ä¸ç”¨æˆ·æ²Ÿé€š â†’ `release`ã€‚

---

## 8. æ•°æ®ç»“æ„

### 8.1 SessionStateï¼ˆMVPï¼‰

```json
{
  "session_name": "session_123",
  "status": "bot_active",
  "conversation_id": "conv_xxx",
  "user_profile": {
    "nickname": "è®¿å®¢A",
    "vip": false
  },
  "history": [
    { "id": "msg1", "role": "user", "content": "ä½ å¥½", "timestamp": 1737000000 },
    { "id": "msg2", "role": "assistant", "content": "æ‚¨å¥½!", "timestamp": 1737000001 }
  ],
  "escalation": {
    "reason": "keyword",
    "details": "ç”¨æˆ·è¾“å…¥: æˆ‘æƒ³æ‰¾äººå·¥",
    "severity": "high",
    "trigger_at": 1737000300
  },
  "assigned_agent": null,
  "mail": { "sent": false },
  "ai_fail_count": 0,
  "last_manual_end_at": null
}
```

- `history` æœ€å¤šä¿ç•™ 50 æ¡ï¼Œè¶…å‡ºéƒ¨åˆ†å†™å…¥å½’æ¡£ï¼ˆåç»­å¯è½ç£ç›˜ï¼‰ã€‚
- `user_profile` ä»…åŒ…å« `nickname`ã€`vip`ï¼Œåç»­å†æ‰©å±•ã€‚
- `audit_trail` å¦å»ºåˆ—è¡¨å­˜å‚¨ï¼ˆ`[{status_from,status_to,operator,timestamp}]`ï¼‰ï¼Œé¿å…æ±¡æŸ“ä¸»ç»“æ„ã€‚
- æ‰€æœ‰æ—¶é—´å­—æ®µä½¿ç”¨ UTC æ—¶é—´æˆ³ï¼ˆç§’ï¼‰ï¼Œå‰ç«¯è´Ÿè´£æ ¼å¼åŒ–ã€‚

### 8.2 Messageï¼ˆå‰ç«¯ï¼‰

```ts
interface Message {
  id: string;
  content: string;
  role: 'user' | 'assistant' | 'system' | 'agent';
  timestamp: number; // UTC
  sender?: string;
  agent_info?: { agent_id: string; agent_name: string };
}
```

---

## 9. API åˆ—è¡¨ï¼ˆæ›´æ–°åï¼‰


| æ¥å£                                         | æè¿°         | é˜¶æ®µ | è¯´æ˜                          |
| -------------------------------------------- | ------------ | ---- | ----------------------------- |
| `POST /api/chat`                             | åŒæ­¥ AI æœåŠ¡ | ç°æœ‰ | æ–°å¢çŠ¶æ€åˆ¤æ–­/ç›‘ç®¡é’©å­         |
| `POST /api/chat/stream`                      | SSE AI æœåŠ¡  | ç°æœ‰ | SSE ä¹Ÿæ‰¿æ‹…äººå·¥é˜¶æ®µæ¶ˆæ¯æ¨é€    |
| `POST /api/manual/escalate`                  | è§¦å‘äººå·¥     | P0   | Body`{session_name, reason?}` |
| `GET /api/sessions/{session_name}`           | æŸ¥è¯¢ä¼šè¯     | P0   | è¿”å›`SessionState`            |
| `POST /api/manual/messages`                  | äººå·¥é˜¶æ®µæ¶ˆæ¯ | P0   | è§’è‰²`agent/user`              |
| `POST /api/sessions/{session_name}/release`  | ç»“æŸäººå·¥     | P0   | å†™ç³»ç»Ÿæ¶ˆæ¯                    |
| `GET /api/sessions`                          | ä¼šè¯åˆ—è¡¨     | P1   | å·¥ä½œå°é˜Ÿåˆ—                    |
| `POST /api/sessions/{session_name}/takeover` | åå¸­æ¥å…¥     | P1   | é˜²æ­¢æŠ¢æ¥                      |
| `POST /api/sessions/{session_name}/email`    | é‚®ä»¶è½¬äº¤     | P1   | è§¦å‘é‚®ä»¶æ¨¡å—                  |
| `GET /api/shift/config`                      | ç­æ¬¡é…ç½®     | P1   | å‰ç«¯å±•ç¤º                      |

å“åº”ç»Ÿä¸€ä¸ºï¼š

```json
{ "success": true, "data": {...} }
{ "success": false, "error": "message", "code": "ERROR_CODE" }
```

---

## 10. éåŠŸèƒ½éœ€æ±‚

- **æ€§èƒ½**ï¼šAI æµå¼å“åº”å»¶è¿Ÿä¿æŒç°çŠ¶ï¼›äººå·¥æ¶ˆæ¯é€šè¿‡ SSE æ¨é€ï¼Œç«¯åˆ°ç«¯ â‰¤ 500msã€‚
- **å¯é æ€§**ï¼šSessionState å†…å­˜+æ–‡ä»¶å¤‡ä»½ï¼›P2 å†åˆ‡æ¢ Redisã€‚
- **å®‰å…¨**ï¼šäººå·¥æ¥å£å¼ºåˆ¶ JWT role æ ¡éªŒï¼ˆ`agent`/`admin`ï¼‰ã€‚
- **æ—¥å¿—**ï¼šçŠ¶æ€å˜æ›´ã€äººå·¥æ“ä½œã€é‚®ä»¶ç»“æœå¿…é¡»å†™å…¥ JSON æ—¥å¿—ã€‚
- **é…ç½®åŒ–**ï¼šå…³é”®è¯ã€ç­æ¬¡ã€é‚®ç®±ç­‰è¯»è‡ª `.env`ï¼Œå¹¶åœ¨ `/api/config` æˆ– `/api/shift/config` æš´éœ²åªè¯»ä¿¡æ¯ã€‚

---

## 11. éªŒæ”¶æ ‡å‡†

1. ç”¨æˆ·é€šè¿‡ç°æœ‰å‰ç«¯å¯å®Œæ•´ä½“éªŒ AI æµç¨‹ï¼Œä¸”çŠ¶æ€é»˜è®¤ `bot_active`ã€‚
2. å½“è¾“å…¥â€œæˆ‘è¦äººå·¥â€æ—¶ï¼Œåç«¯å°†çŠ¶æ€åˆ‡æ¢åˆ° `pending_manual`ï¼Œå‰ç«¯çŠ¶æ€æ¡æ›´æ–°å¹¶ç¦æ­¢è¿›ä¸€æ­¥è°ƒç”¨ `/api/chat/stream`ã€‚
3. è°ƒç”¨ `POST /api/manual/messages`ï¼ˆrole=`agent`ï¼‰å³å¯è®©ç”¨æˆ·ç«¯æ”¶åˆ°äººå·¥å›å¤ï¼ˆé€šè¿‡ SSEï¼‰ã€‚
4. `GET /api/sessions/{session_name}` è¿”å›çš„å†å²åŒ…å« AIã€ç”¨æˆ·ã€äººå·¥ä¸‰ç§è§’è‰²ï¼Œé•¿åº¦æœ€å¤š 50ã€‚
5. è°ƒç”¨ `POST /release` åçŠ¶æ€å›åˆ° `bot_active`ï¼Œå‰ç«¯æç¤ºâ€œå·²è¿”å› AIâ€ï¼Œç”¨æˆ·å†æ¬¡å‘æ¶ˆæ¯ä»èµ° AI æµç¨‹ã€‚
6. æ—¥å¿—ä¸­å¯æ‰¾åˆ° `manual_takeover`ã€`manual_release`ã€`escalate` ç­‰äº‹ä»¶ã€‚
7. P1 éªŒæ”¶ï¼ˆå¯é€‰ï¼‰ï¼šå½“è§¦å‘äººå·¥ä¸”è¶…å‡ºç­æ¬¡ï¼ŒçŠ¶æ€åˆ‡æ¢åˆ° `after_hours_email`ï¼Œå¹¶å‘é…ç½®é‚®ç®±å‘é€æ‘˜è¦ï¼›å·¥ä½œå°å¯é€šè¿‡ API æ¥ç®¡ä¼šè¯ã€‚

---

## 12. é£é™©ä¸è§„åˆ’

- **çŠ¶æ€ä¸€è‡´æ€§**ï¼šéœ€åœ¨ SessionStateStore ä¸­å®ç° CAS / é”ã€‚
- **SSE ä¸äººå·¥å…±å­˜**ï¼šæœåŠ¡ç«¯éœ€è¦èƒ½åœ¨åŒä¸€è·¯å¾„æ¨é€è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ³¨æ„ä¸ Coze æµå¼å›å¤çš„é¡ºåºã€‚
- **é‡å¯æ¢å¤**ï¼šMVP é€šè¿‡æ–‡ä»¶å¿«ç…§æ¢å¤ SessionStateï¼›åç»­æ”¹ä¸º Redisã€‚
- **å®‰å…¨**ï¼šJWT éœ€åŒ…å« `role`ï¼Œå¹¶åœ¨å·¥ä½œå°/åå°æ¥å£æ ¡éªŒã€‚
- **æŠ€æœ¯å€º**ï¼šWebSocketã€æƒ…ç»ªæ£€æµ‹ã€Redis ç­‰æ”¾åœ¨ P2ï¼Œè§„åˆ’å®Œæˆåé€æ­¥å®ç°ã€‚

---

æœ¬ PRD å·²ç»“åˆè¯„å®¡å»ºè®®è°ƒæ•´ä¸ºâ€œå†…å­˜+SSE çš„ MVPâ€æ–¹æ¡ˆï¼Œæ˜ç¡®äº†é˜¶æ®µç›®æ ‡ã€ç®€åŒ–åçš„æ¥å£é›†åˆä»¥åŠæ•°æ®ç»“æ„çº¦æŸï¼Œä¸ºåç»­ Claude Code å¼€å‘æä¾›ç»Ÿä¸€ä¾æ®ã€‚æ›´æ–° PRD åè¯·åŒæ­¥ä»»åŠ¡æ‹†åˆ†ä¸ API æ–‡æ¡£ï¼Œä¿æŒä¸€è‡´æ€§ã€‚
